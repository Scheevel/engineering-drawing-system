# Story 3.2: Basic Schema Management Components

## Status
In Progress

## Story
**As a** railroad bridge engineer,
**I want** to view and navigate my project's component type schemas,
**so that** I can understand what schema structures are available and access schema management functionality.

## Acceptance Criteria

1. **Schema Information Display**
   - Display schema name with clear typography following existing Material-UI patterns
   - Show description with proper text wrapping and formatting
   - Display version number and creation/modification timestamps
   - Show field count with accurate counting and formatting
   - Display schema status (active/inactive) with visual indicators

2. **Default Schema Indicator**
   - Show default schema indicator using star icon (filled for default, outline for non-default)
   - Display "Default Schema" text label for accessibility
   - Use consistent styling with existing application patterns
   - Clear visual distinction between default and non-default schemas

3. **Schema Usage Statistics**
   - Display component count using this schema
   - Show last usage date if available
   - Include usage percentage within project if applicable
   - Handle loading state for usage data

4. **Schema List View Implementation**
   - Display project schemas in responsive card or table format
   - Use Material-UI Grid or DataGrid following existing patterns
   - Support both card view (mobile) and table view (desktop)
   - Consistent spacing and alignment with existing application

5. **Sorting and Filtering Capabilities**
   - Sort by schema name (alphabetical), creation date, usage count, last modified date
   - Filter by default status, active status, usage status
   - Visual indicators for current sort column and direction
   - Clear filter functionality with visual filter status indicators

6. **Loading and Error States**
   - Loading skeleton/spinner during data fetching
   - Empty state with appropriate messaging ("No schemas found")
   - Error state with retry functionality
   - Proper loading states for individual schema cards

7. **Navigation Integration**
   - Add "Schema Management" menu item to existing navigation sidebar
   - Implement schema management routes: `/schemas` and `/projects/:projectId/schemas`
   - Breadcrumb navigation with clickable elements
   - Active route highlighting following existing patterns

8. **Edit Button Integration**
   - Implement edit button that prepares for edit mode (Story 3.3 functionality)
   - Follow existing button styling and icon patterns
   - Disabled state when schema editing is not available
   - Proper accessibility labels and keyboard navigation

## Tasks / Subtasks

- [x] **Schema Display Components Creation** (AC: 1, 2, 3, 8)
  - [x] Create `src/components/schema-management/SchemaManagementCard.tsx` component
  - [x] Implement schema information display with Material-UI typography
  - [x] Add default schema indicator with star icon system
  - [x] Implement usage statistics display with loading states
  - [x] Add edit button integration following existing patterns

- [x] **Schema List View Implementation** (AC: 4, 5, 6)
  - [x] Create `src/components/schema-management/SchemaListView.tsx` component
  - [x] Implement responsive card/table layout using Material-UI Grid
  - [x] Add sorting capabilities with visual indicators
  - [x] Implement filtering functionality with clear filter options
  - [x] Add loading skeleton, empty state, and error state handling

- [x] **Navigation Integration** (AC: 7)
  - [x] Enhance `src/components/Navigation.tsx` with schema management menu item
  - [x] Create `src/pages/schema/SchemaManagementPage.tsx` page component
  - [x] Create `src/pages/schema/ProjectSchemaPage.tsx` page component
  - [x] Implement route integration in App.tsx with parameter validation
  - [x] Add breadcrumb navigation component

- [x] **React Query Integration** (AC: 4, 6)
  - [x] Create `src/hooks/schema/useSchemaManagement.ts` hook
  - [x] Create `src/hooks/schema/useSchemaNavigation.ts` hook
  - [x] Implement query key factory for schema data caching
  - [x] Add error handling and retry logic for API calls

## Dev Notes

### Architecture Context
**Source:** [docs/architecture.md] - Component-based React architecture with Material-UI design system and React Query for state management. System prioritizes responsive design and real-time validation.

**Navigation Patterns:** [docs/front-end-spec.md] - Application uses sidebar navigation with consistent visual hierarchy. New features should integrate seamlessly with existing navigation patterns.

### Component Integration Requirements
**Source:** [docs/architecture.md#architectural-patterns] - Component-based architecture with sophisticated editing modals and real-time validation. Schema management must integrate with existing `FlexibleComponentCard.tsx` component.

**Existing Component References:**
- Navigation component: `src/components/Navigation.tsx` - Add schema management menu item
- Flexible components: `src/components/flexible/FlexibleComponentCard.tsx` - Integration point for schema selection

### Material-UI Integration
**Source:** [docs/architecture.md#tech-stack] - UI Component Library: Material-UI (MUI) ^5.14.0 for professional engineering UI components with consistent design system.

**Design Requirements:** [docs/front-end-spec.md] - Build on standard libraries, minimize custom components. Use Material-UI Grid, DataGrid, Typography, Card, and Button components following existing patterns.

### State Management Patterns
**Source:** [docs/architecture.md#tech-stack] - State Management: React Query ^3.39.0 for server state management with optimistic updates and conflict resolution.

**Hook Patterns:** Follow existing React Query patterns with proper error handling, loading states, and cache invalidation strategies established in the application.

### API Integration
**Source:** [docs/architecture.md#api-style] - REST + OpenAPI 3.0.0 APIs with auto-generated documentation. API calls should follow existing FastAPI patterns.

**Expected API Endpoints:**
- `getProjectSchemas(projectId)` - Fetch schemas for specific project
- `getGlobalSchemas()` - Fetch global schemas (if applicable)
- Schema usage statistics endpoints

### Project Structure Alignment
**Based on Story 3.1 infrastructure:**
- Schema components: `/src/components/schema-management/`
- Page components: `/src/pages/schema/`
- Schema hooks: `/src/hooks/schema/`
- Following established directory structure from frontend/src analysis

### Testing

**Testing Standards:** [docs/architecture.md#tech-stack] - Frontend Testing: Jest ^29.5.0 + React Testing Library ^13.4.0 with component and integration testing patterns.

**Testing Requirements for this Story:**
- Unit tests for SchemaManagementCard component with different schema states
- Integration tests for SchemaListView with sorting and filtering
- Navigation integration tests for menu item and routing
- React Query hook tests with mock API responses
- Accessibility tests for keyboard navigation and screen reader compatibility

**Test File Locations:**
- `src/components/schema-management/SchemaManagementCard.test.tsx`
- `src/components/schema-management/SchemaListView.test.tsx`
- `src/hooks/schema/useSchemaManagement.test.ts`

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-01-26 | 1.0 | Initial story creation with template compliance | Scrum Master |

## Dev Agent Record

### Agent Model Used
Claude Opus 4.1 (claude-opus-4-1-20250805)

### Debug Log References
Starting implementation of Story 3.2 - Basic Schema Management Components

### Completion Notes List
- Started implementation: 2025-01-26
- Implementing Task 1: Schema Display Components Creation

### File List
*To be populated by dev agent during implementation*

## QA Results
*To be populated by QA agent after implementation review*